[gd_scene format=3 uid="uid://d1vx0y4r6i37o"]

[ext_resource type="Theme" uid="uid://bunttssun0swb" path="res://themes/twm_theme/twm_theme.tres" id="1_kusv6"]
[ext_resource type="Script" uid="uid://dg1q0tio7xgdj" path="res://games/tetris/TetrisGameController.cs" id="2_jbl8a"]
[ext_resource type="PackedScene" uid="uid://hotb3k0j3v61" path="res://games/tetris/tetris_game.tscn" id="3_6mx11"]
[ext_resource type="AudioStream" uid="uid://cnges3gq54ajb" path="res://games/tetris/NikoProcessing.mp3" id="7_2166b"]
[ext_resource type="AudioStream" uid="uid://c4rp6m7evcn11" path="res://games/tetris/sounds/drop_light.ogg" id="9_kkf6g"]
[ext_resource type="AudioStream" uid="uid://brljmdrmc8f5s" path="res://games/tetris/sounds/drop_normal.ogg" id="10_il17r"]
[ext_resource type="AudioStream" uid="uid://dn5mbakemduix" path="res://games/tetris/sounds/height_place.ogg" id="10_lplub"]
[ext_resource type="AudioStream" uid="uid://nhg41mam7lpf" path="res://games/tetris/sounds/place.ogg" id="11_6mx11"]
[ext_resource type="AudioStream" uid="uid://x2klbwvgekl6" path="res://games/tetris/sounds/drop_mega.ogg" id="11_lplub"]
[ext_resource type="PackedScene" uid="uid://o3kl3g87pn3q" path="res://prefabs/base_window.tscn" id="14_6mx11"]
[ext_resource type="PackedScene" uid="uid://b1ypbdeyjoksp" path="res://prefabs/state_icon.tscn" id="15_6mj4e"]
[ext_resource type="Script" uid="uid://dfwf2y7b0yloy" path="res://games/tetris/TetrisMenu.cs" id="15_o08yc"]
[ext_resource type="Script" uid="uid://dx72gvtweybk5" path="res://games/tetris/midi/JsonMidiPlayer.cs" id="16_5ecpt"]
[ext_resource type="Script" uid="uid://i1vgqb61238n" path="res://games/tetris/TetrisShake.cs" id="23_bh2wt"]

[node name="Tetris" type="Window" unique_id=631506823 node_paths=PackedStringArray("GameTimer", "FpsCounter", "ScoreCounter", "LinesCounter", "LeftRuler", "RightRuler", "PauseButton", "RestartButton", "ExitButton", "PlaceLightSound", "PlaceNormalSound", "PlaceMegaSound", "PlaceSound", "HeightPlaceSound")]
transparent_bg = true
oversampling = false
oversampling_override = 1.0
initial_position = 4
size = Vector2i(1900, 1080)
borderless = true
always_on_top = true
transparent = true
minimize_disabled = true
maximize_disabled = true
content_scale_size = Vector2i(1400, 1080)
content_scale_mode = 2
content_scale_aspect = 4
theme = ExtResource("1_kusv6")
script = ExtResource("2_jbl8a")
GameTimer = NodePath("Timer")
FpsCounter = NodePath("GlobalAnchor/TetrisAnchor/PanelContainer/BG/Fps")
ScoreCounter = NodePath("GlobalAnchor/Statistics/Control2/VBoxContainer/Panel6/VBoxContainer/HBoxContainer/Score")
LinesCounter = NodePath("GlobalAnchor/Statistics/Control2/VBoxContainer/Panel6/VBoxContainer/HBoxContainer2/Lines")
LeftRuler = NodePath("GlobalAnchor/TetrisAnchor/PanelContainer/BG/LeftRuler")
RightRuler = NodePath("GlobalAnchor/TetrisAnchor/PanelContainer/BG/RightRuler")
PauseButton = NodePath("GlobalAnchor/Statistics/Control2/VBoxContainer/HBoxContainer/Pause")
RestartButton = NodePath("GlobalAnchor/Statistics/Control2/VBoxContainer/HBoxContainer/Restart")
ExitButton = NodePath("GlobalAnchor/Statistics/Control2/VBoxContainer/HBoxContainer/Exit")
PlaceLightSound = NodePath("DropLight")
PlaceNormalSound = NodePath("DropNormal")
PlaceMegaSound = NodePath("DropMega")
PlaceSound = NodePath("Place")
HeightPlaceSound = NodePath("HeightPlace")

[node name="Camera2D" type="Camera2D" parent="." unique_id=901100193]

[node name="GlobalAnchor" parent="." unique_id=144354466 instance=ExtResource("3_6mx11")]

[node name="Combo" parent="GlobalAnchor/Statistics/Control2/VBoxContainer/Control/Panel" parent_id_path=PackedInt32Array(144354466, 718399785) index="0" unique_id=2065137089 node_paths=PackedStringArray("GameController")]
GameController = NodePath("../../../../../../..")

[node name="Control" parent="GlobalAnchor/Statistics/VBoxContainer2/Panel" parent_id_path=PackedInt32Array(144354466, 1830775220) index="0" unique_id=948313049 node_paths=PackedStringArray("GameController")]
GameController = NodePath("../../../../..")

[node name="Control2" parent="GlobalAnchor/Statistics/VBoxContainer2/Panel2" parent_id_path=PackedInt32Array(144354466, 1812937741) index="0" unique_id=1260035810 node_paths=PackedStringArray("GameController")]
GameController = NodePath("../../../../..")

[node name="Control3" parent="GlobalAnchor/Statistics/VBoxContainer2/Panel3" parent_id_path=PackedInt32Array(144354466, 407190473) index="0" unique_id=987087713 node_paths=PackedStringArray("GameController")]
GameController = NodePath("../../../../..")

[node name="Control4" parent="GlobalAnchor/Statistics/VBoxContainer2/Panel4" parent_id_path=PackedInt32Array(144354466, 466819356) index="0" unique_id=602183092 node_paths=PackedStringArray("GameController")]
GameController = NodePath("../../../../..")

[node name="TetrisTileMap" parent="GlobalAnchor/TetrisAnchor/PanelContainer" parent_id_path=PackedInt32Array(144354466, 772644358) index="1" unique_id=1198170412 node_paths=PackedStringArray("GameController")]
GameController = NodePath("../../../..")

[node name="Particles" parent="GlobalAnchor/TetrisAnchor" parent_id_path=PackedInt32Array(144354466, 1300014302) index="1" unique_id=1915332978 node_paths=PackedStringArray("GameController")]
GameController = NodePath("../../..")

[node name="Area" parent="GlobalAnchor" index="2" unique_id=538390412]
ShowTaskbarIcon = true

[node name="Timer" type="Timer" parent="." unique_id=67181535]
wait_time = 0.444

[node name="NikoProcessing" type="AudioStreamPlayer" parent="." unique_id=919146333]
stream = ExtResource("7_2166b")
volume_db = -11.335
bus = &"Music"

[node name="NikoProcessing2" type="AudioStreamPlayer" parent="." unique_id=573513503]
volume_db = -11.335
bus = &"Music"

[node name="DropLight" type="AudioStreamPlayer" parent="." unique_id=1328584627]
stream = ExtResource("9_kkf6g")

[node name="DropNormal" type="AudioStreamPlayer" parent="." unique_id=1575850112]
stream = ExtResource("10_il17r")

[node name="DropMega" type="AudioStreamPlayer" parent="." unique_id=758611075]
stream = ExtResource("11_lplub")

[node name="HeightPlace" type="AudioStreamPlayer" parent="." unique_id=1150014201]
stream = ExtResource("10_lplub")
volume_db = -2.0

[node name="Place" type="AudioStreamPlayer" parent="." unique_id=1293675998]
stream = ExtResource("11_6mx11")
volume_db = -2.0

[node name="Menu" parent="." unique_id=1561168932 instance=ExtResource("14_6mx11")]
oversampling = false
title = "Tetris Starter"
initial_position = 4
size = Vector2i(280, 200)
visible = false
transient = true
exclusive = true
always_on_top = false
minimize_disabled = true
maximize_disabled = true

[node name="Control" parent="Menu" index="0" node_paths=PackedStringArray("GameController", "MenuWindow", "MusicPlayer", "PlayButton", "MusicCheckbox", "ExitButton", "StatisticBumpAnimator", "GameTimer")]
script = ExtResource("15_o08yc")
GameController = NodePath("../..")
MenuWindow = NodePath("..")
MusicPlayer = NodePath("../../NikoProcessing")
PlayButton = NodePath("WindowContainer/Content/VBoxContainer/Start")
MusicCheckbox = NodePath("WindowContainer/Content/VBoxContainer/CheckBox")
ExitButton = NodePath("WindowContainer/Content/VBoxContainer/Exit")
StatisticBumpAnimator = NodePath("../../GlobalAnchor/Statistics/StatisticsAnimator")
GameTimer = NodePath("../../Timer")

[node name="Title" parent="Menu/Control/WindowContainer/Topbar/MarginContainer/HBoxContainer" index="1"]
text = "TETRIS_STARTER"

[node name="HideButtonContainer" parent="Menu/Control/WindowContainer/Topbar/MarginContainer/HBoxContainer" index="2"]
visible = false

[node name="CloseButtonContainer" parent="Menu/Control/WindowContainer/Topbar/MarginContainer/HBoxContainer" index="3"]
visible = false

[node name="VBoxContainer" type="VBoxContainer" parent="Menu/Control/WindowContainer/Content" index="0" unique_id=1161283194]
custom_minimum_size = Vector2(120, 0)
layout_mode = 1
anchors_preset = 13
anchor_left = 0.5
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -38.0
offset_right = 38.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1

[node name="Start" type="Button" parent="Menu/Control/WindowContainer/Content/VBoxContainer" unique_id=484122032]
layout_mode = 2
size_flags_vertical = 4
text = "PLAY"

[node name="CheckBox" type="CheckBox" parent="Menu/Control/WindowContainer/Content/VBoxContainer" unique_id=750743521]
layout_mode = 2
button_pressed = true
text = "MUSIC"

[node name="StateIcon" parent="Menu/Control/WindowContainer/Content/VBoxContainer/CheckBox" unique_id=948740186 instance=ExtResource("15_6mj4e")]
layout_mode = 1
offset_top = -12.0
offset_bottom = 12.0

[node name="Exit" type="Button" parent="Menu/Control/WindowContainer/Content/VBoxContainer" unique_id=1778745672]
layout_mode = 2
size_flags_vertical = 4
text = "EXIT"

[node name="Shaker" type="Node" parent="." unique_id=587479804 node_paths=PackedStringArray("GameController", "ControlToShake")]
script = ExtResource("23_bh2wt")
GameController = NodePath("..")
ControlToShake = NodePath("../GlobalAnchor/TetrisAnchor/PanelContainer")

[node name="Midi" type="Node" parent="." unique_id=1545968625 node_paths=PackedStringArray("AttachedPlayer")]
script = ExtResource("16_5ecpt")
AttachedPlayer = NodePath("../NikoProcessing")
MidiPath = "res://games/tetris/midi/NikoProcessing.json"

[editable path="GlobalAnchor"]
[editable path="Menu"]
